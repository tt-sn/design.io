<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<script type="text/javascript" src="https://tama.tok.access-company.com/public/publis/nfbr/tmp/sasaki/master/lib/jquery-1.8.0.custom.js"></script>
<title>End of book</title>
</head>
<body>
	<div id="paramField">
		<div id='testString'>巻末iframeテスト(CORS)</div>
	</div>

<a href="#" id="closeViewerHref">ビューワーを閉じる(href)</a>
<div id="closeViewerButton"><button>ビューワを閉じる(button)</button></div>
<script type="text/javascript">
//window.parent.postMessage({action : 'closeViewer'}, 'https://tama.tok.access-company.com');
    var handleEvent = function () {
      try {
        document.referrer.postMessage({action: 'closeViewer'}, '*');
      } catch (e) {
      }
      //try {
      //  parent.window.postMessage({action: 'closeViewer'}, '*');
      //} catch (e) {
      //}
      return false;
    };
    var closeViewerButton = document.getElementById('closeViewerButton');
    closeViewerButton.addEventListener('touchstart', handleEvent);
    closeViewerButton.addEventListener('click', handleEvent);
    var closeViewerHref = document.getElementById('closeViewerHref');
    closeViewerHref.addEventListener('touchstart', handleEvent);
    closeViewerHref.addEventListener('click', handleEvent);
</script>
</body>
</html>
